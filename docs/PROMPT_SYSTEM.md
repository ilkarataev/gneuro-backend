# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞–º–∏

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞–º–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è AI —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- üéØ **–ì–∏–±–∫–æ—Å—Ç—å** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- üìà **–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ–º–ø—Ç–æ–≤
- üè∑Ô∏è **–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- üîÑ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π
- ‚ö° **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –ø—Ä–æ–º–ø—Ç–∞–º

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `prompts`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | INTEGER | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `key` | VARCHAR(100) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ |
| `name` | VARCHAR(255) | –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ |
| `description` | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞ |
| `content` | TEXT | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–º–ø—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ |
| `category` | VARCHAR(50) | –ö–∞—Ç–µ–≥–æ—Ä–∏—è (image_generation, restoration, etc.) |
| `variables` | JSON | –û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–º–ø—Ç–µ |
| `is_active` | BOOLEAN | –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø—Ä–æ–º–ø—Ç |
| `created_by` | INTEGER | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–≤—à–µ–≥–æ –ø—Ä–æ–º–ø—Ç |
| `version` | INTEGER | –í–µ—Ä—Å–∏—è –ø—Ä–æ–º–ø—Ç–∞ |
| `createdAt` | DATETIME | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| `updatedAt` | DATETIME | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

### `image_generation`
- `image_generation_base` - –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `image_generation_img2img` - –ü—Ä–æ–º–ø—Ç –¥–ª—è img2img –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### `photo_restoration`
- `photo_restoration_base` - –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏ —Ñ–æ—Ç–æ

### `photo_stylization`
- `photo_style_passport` - –°—Ç–∏–ª—å –ø–∞—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Ñ–æ—Ç–æ
- `photo_style_glamour` - –ì–ª–∞–º—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å
- `photo_style_professional` - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å
- `photo_style_cartoon` - –ú—É–ª—å—Ç—è—à–Ω—ã–π —Å—Ç–∏–ª—å

### `era_style`
- `era_style_russia_19` - –†–æ—Å—Å–∏–π—Å–∫–∏–π —Å—Ç–∏–ª—å 19 –≤–µ–∫–∞
- `era_style_victorian` - –í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π —Å—Ç–∏–ª—å
- `era_style_renaissance` - –°—Ç–∏–ª—å —ç–ø–æ—Ö–∏ –í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ü—Ä–æ–º–ø—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{variableName}`:

```text
Create a high-quality digital image: {originalPrompt}. {styleModifier} {qualityModifier} The image should be detailed, visually appealing, and professionally crafted.
```

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

```typescript
const prompt = await PromptService.getPrompt('image_generation_base', {
  originalPrompt: '–∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç –Ω–∞–¥ –º–æ—Ä–µ–º',
  styleModifier: 'Style: —Ä–µ–∞–ª–∏–∑–º.',
  qualityModifier: 'Quality: –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ.'
});
```

## API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞–º–∏

### GET /api/prompts
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `category` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `active` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (true/false)

```bash
curl "http://localhost:3000/api/prompts?category=image_generation&active=true"
```

### GET /api/prompts/:key
–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–ø—Ç –ø–æ –∫–ª—é—á—É

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `version` - –≤–µ—Ä—Å–∏—è –ø—Ä–æ–º–ø—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `variables` - JSON —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –°—ã—Ä–æ–π –ø—Ä–æ–º–ø—Ç
curl "http://localhost:3000/api/prompts/image_generation_base"

# –° –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
curl "http://localhost:3000/api/prompts/image_generation_base?variables={\"originalPrompt\":\"sunset\"}"
```

### POST /api/prompts
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç

```bash
curl -X POST "http://localhost:3000/api/prompts" \
  -H "Content-Type: application/json" \
  -d '{
    "key": "new_prompt_key",
    "name": "–ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç",
    "content": "–°–æ–∑–¥–∞–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {description}",
    "category": "custom",
    "variables": {"description": "string"}
  }'
```

### PUT /api/prompts/:key
–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é)

```bash
curl -X PUT "http://localhost:3000/api/prompts/image_generation_base" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç: {originalPrompt}"
  }'
```

### DELETE /api/prompts/:key
–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç

```bash
curl -X DELETE "http://localhost:3000/api/prompts/old_prompt_key"
```

### POST /api/prompts/cache/clear
–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø—Ä–æ–º–ø—Ç–æ–≤

```bash
curl -X POST "http://localhost:3000/api/prompts/cache/clear"
```

### GET /api/prompts/cache/stats
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫—ç—à–∞

```bash
curl "http://localhost:3000/api/prompts/cache/stats"
```

## –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã PromptService

```typescript
// –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–ø—Ç —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
const prompt = await PromptService.getPrompt('image_generation_base', {
  originalPrompt: '–∫—Ä–∞—Å–∏–≤—ã–π –ø–µ–π–∑–∞–∂',
  styleModifier: 'Style: —Ä–µ–∞–ª–∏–∑–º.'
});

// –ü–æ–ª—É—á–∏—Ç—å —Å—ã—Ä–æ–π –ø—Ä–æ–º–ø—Ç
const rawPrompt = await PromptService.getRawPrompt('image_generation_base');

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const prompts = await PromptService.getPromptsByCategory('image_generation');

// –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç
const newPrompt = await PromptService.createPrompt({
  key: 'custom_prompt',
  name: '–ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç',
  content: '–ü—Ä–æ–º–ø—Ç —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π: {variable}',
  category: 'custom'
});

// –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç
const updated = await PromptService.updatePrompt('custom_prompt', {
  content: '–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç: {variable}'
});
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–µ—Ä–≤–∏—Å—ã

```typescript
// –í —Å–µ—Ä–≤–∏—Å–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
const enhancedPrompt = await PromptService.getPrompt('image_generation_base', {
  originalPrompt: userPrompt,
  styleModifier: options?.style ? `Style: ${options.style}.` : '',
  qualityModifier: options?.quality ? `Quality: ${options.quality}.` : ''
});
```

## –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –Ω–∞ 5 –º–∏–Ω—É—Ç –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º:

```typescript
// –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à
PromptService.clearCache();

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫—ç—à–∞
const stats = PromptService.getCacheStats();
console.log(`–ö—ç—à–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–æ–º–ø—Ç–æ–≤: ${stats.size}`);
```

## –ú–∏–≥—Ä–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
```bash
npm run migrate:up
```

### –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ `20250912_seed_prompts_data.ts`

## –†–µ–∑–µ—Ä–≤–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ (fallback) –ø—Ä–æ–º–ø—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
- ‚ùå –û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞
- üìù –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã –ø–µ—Ä–µ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π
2. **–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –≤–µ—Ä—Å–∏–π
3. **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤–∞–∂–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –≤ —Ñ–∞–π–ª–∞—Ö
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –æ—à–∏–±–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
